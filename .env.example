# =================================================================
# iPEC Coach Connect - Environment Configuration Template
# =================================================================
#
# Copy this file to create environment-specific configurations:
# - .env.local (local development)
# - .env.staging (staging environment) 
# - .env.production (production environment)
#
# IMPORTANT: Never commit actual .env files with real credentials!
# =================================================================

# -----------------------------------------------------------------
# SUPABASE CONFIGURATION
# -----------------------------------------------------------------
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# -----------------------------------------------------------------
# STRIPE CONFIGURATION  
# -----------------------------------------------------------------

# Stripe Publishable Keys (safe to expose in frontend)
VITE_STRIPE_PUBLISHABLE_KEY_TEST=pk_test_your_test_publishable_key
VITE_STRIPE_PUBLISHABLE_KEY_LIVE=pk_live_your_live_publishable_key

# Stripe Secret Keys (server-side only, NEVER expose in frontend)
STRIPE_SECRET_KEY_TEST=sk_test_your_test_secret_key
STRIPE_SECRET_KEY_LIVE=sk_live_your_live_secret_key

# Stripe Webhook Endpoints (configured in Stripe Dashboard)
STRIPE_WEBHOOK_ENDPOINT_SECRET_TEST=whsec_your_test_webhook_secret
STRIPE_WEBHOOK_ENDPOINT_SECRET_LIVE=whsec_your_live_webhook_secret

# Stripe API Version (recommended to pin for consistency)
STRIPE_API_VERSION=2024-11-20.acacia

# Stripe Product and Price IDs (created in Stripe Dashboard)
STRIPE_COACHING_SESSION_PRICE_ID=price_your_session_price_id
STRIPE_PREMIUM_SUBSCRIPTION_PRICE_ID=price_your_premium_subscription_id
STRIPE_BASIC_SUBSCRIPTION_PRICE_ID=price_your_basic_subscription_id

# Payment Configuration
COACH_REVENUE_PERCENTAGE=70
PLATFORM_FEE_PERCENTAGE=30
MINIMUM_SESSION_PRICE=5000
MINIMUM_SUBSCRIPTION_PRICE=2000
ALLOWED_PAYMENT_METHODS=card,us_bank_account,sepa_debit
DEFAULT_TRIAL_PERIOD_DAYS=7

# Webhook Configuration
STRIPE_WEBHOOK_URL=https://your-domain.com/api/webhooks/stripe
STRIPE_WEBHOOK_EVENTS=payment_intent.succeeded,payment_intent.payment_failed,customer.subscription.created,customer.subscription.updated,customer.subscription.deleted,invoice.payment_succeeded,invoice.payment_failed,setup_intent.succeeded

# Enable Stripe test mode (true for development)
STRIPE_TEST_MODE=true

# -----------------------------------------------------------------
# APPLICATION CONFIGURATION
# -----------------------------------------------------------------
VITE_APP_NAME=iPEC Coach Connect
VITE_APP_VERSION=1.0.0
VITE_APP_ENVIRONMENT=development

# -----------------------------------------------------------------
# MONITORING & ANALYTICS
# -----------------------------------------------------------------
VITE_SENTRY_DSN=your_sentry_dsn
VITE_GOOGLE_ANALYTICS_ID=your_ga_tracking_id

# -----------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------
VITE_ENABLE_COACHING_FEATURES=true
VITE_ENABLE_COMMUNITY_FEATURES=true
VITE_ENABLE_LEARNING_FEATURES=true
VITE_ENABLE_ANALYTICS=false

# -----------------------------------------------------------------
# API ENDPOINTS
# -----------------------------------------------------------------
VITE_API_BASE_URL=http://localhost:3000
VITE_WEBHOOK_BASE_URL=http://localhost:3000/webhooks

# -----------------------------------------------------------------
# SECURITY CONFIGURATION
# -----------------------------------------------------------------
VITE_ENABLE_DEBUG_MODE=false
VITE_CORS_ORIGIN=http://localhost:5173

# -----------------------------------------------------------------
# RATE LIMITING CONFIGURATION
# -----------------------------------------------------------------
# Maximum attempts before blocking
VITE_RATE_LIMIT_LOGIN_MAX_ATTEMPTS=5
VITE_RATE_LIMIT_LOGIN_WINDOW_MS=900000  # 15 minutes
VITE_RATE_LIMIT_LOGIN_BLOCK_DURATION_MS=1800000  # 30 minutes

VITE_RATE_LIMIT_SIGNUP_MAX_ATTEMPTS=3
VITE_RATE_LIMIT_SIGNUP_WINDOW_MS=3600000  # 1 hour
VITE_RATE_LIMIT_SIGNUP_BLOCK_DURATION_MS=3600000  # 1 hour

VITE_RATE_LIMIT_PASSWORD_RESET_MAX_ATTEMPTS=3
VITE_RATE_LIMIT_PASSWORD_RESET_WINDOW_MS=3600000  # 1 hour
VITE_RATE_LIMIT_PASSWORD_RESET_BLOCK_DURATION_MS=3600000  # 1 hour

# Progressive delay configuration
VITE_RATE_LIMIT_PROGRESSIVE_DELAY_ENABLED=true
VITE_RATE_LIMIT_PROGRESSIVE_DELAY_BASE_MS=1000  # 1 second base delay
VITE_RATE_LIMIT_PROGRESSIVE_DELAY_MAX_MS=10000  # 10 seconds max delay

# Account lockout configuration
VITE_RATE_LIMIT_ACCOUNT_LOCKOUT_THRESHOLD=10  # Total failed attempts before account lockout
VITE_RATE_LIMIT_ACCOUNT_LOCKOUT_DURATION_MS=86400000  # 24 hours

# Redis configuration (for production)
VITE_REDIS_URL=redis://localhost:6379
VITE_RATE_LIMIT_STORAGE_TYPE=memory  # Options: memory, redis